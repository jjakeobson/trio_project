<h1>Your Cart</h1>

<% if @cart.nil? %>
  <p>
    Your cart is currently empty.
    <%= link_to "Go To Products", products_path %>
  </p>
<% else %>
  <%= link_to "Empty Your Cart", cart_clear_path %>
  <%= link_to "Go To Products", products_path %>
  <%= link_to "Pay Now", charges_path %>
<% end %>

<% total = 0 %>
<ul>
  <% @cart.unique_cart_items.each do |cart_item| %>
      <li>
        <b>Product:</b> <%= link_to cart_item.product.name, cart_item.product %>
        <p>
        <b>Description:</b>  <%= cart_item.product.description %>
        </p>
        <p>
          <b>Price:</b> <%= number_to_currency(cart_item.product.price_in_cents / 100 , :unit => '$') %>
        </p>
        <p>
          <b>Quantity:</b> <%= cart_item.quantity %>
        </p>
      </li>
      <% total += cart_item.quantity * cart_item.product.price_in_cents %>
  <% end %>
<p>
  <% @total = number_to_currency(total / 100, :unit => '$') %>
  <b>  Total: <%= @total %></b>
</p>

</ul>
